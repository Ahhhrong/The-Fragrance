<!DOCTYPE html>
<html lang="en">


<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<link href="style.css" rel="stylesheet" type="text/css" />
  <link href="Normalize.css" rel="stylesheet" type="text/css" />
  <script src="product.js"></script>
  <script src="login.js"></script>
  <script src="a.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"></link>
  <header class="navigationBar" id="MYnavigationBar" >
    <div class = "TopWordsFlex">
      <a href="index.html"><img alt="PROAME" src="img/logo.jpg" style="height: 80px;width: 80px;"></a>
      <a class="topLineNav" href="index.html">Home</a>
      <a class="topLineNav" href="body.html">Body</a>
      <a class="topLineNav" href="hair.html">Hair</a>
      <a class="topLineNav" href="contact.html">Feedback</a>
      <a class="topLineNav" href="checkout.html">Cart</a>
      <a class="topLineNav" href="login.html">Login</a>
      <a class="topLineNav" href="register1.html">Register</a>
      <a class="topLineNav" onclick="openForm()" >Profile Info</a>

          <div class="form-popup" id="myForm">
            <form  class="form-container">
          
              <P id="displayname"></P>
              <br>
              <P id="point"></P>
              <br>
              <button type="button" class="btn cancel" onclick="closeForm()">Close</button>
              <button type="button" class="btn cancel" onclick="logout()">Log Out</button>

            </form>
          </div>
    
        <a href="javascript:void(0);" class="icon" onclick="myFunction1()"><i class="fa fa-bars"></i></a>
        <script>function myFunction1() {
          var x = document.getElementById("MYnavigationBar");
              if (x.className === "navigationBar") 
              {
                  x.className += " responsive";
              } 
              else 
              {
                  x.className = "navigationBar";
              } 
          }</script>
    </div>
</header>
<br><br>    
</head>



<body>
  <div class="container" style="margin-bottom: 20px;">
   
      <div></div>
      <P id="fcname"></P>
      <P id="fcard"></P>
      <P id="fmonth"></P>
      <P id="fcvv"></P>
      <P id="fyear"></P>
      <P id="fname"></P>
      <P id="femail"></P>
      <P id="faddress"></P>
      <P id="fcity"></P>
      <P id="fzip"></P>
      <P id="fstate"></P>
      <script>
        document.getElementById("fcname").innerHTML="Card Name: " +localStorage.getItem("fcname");
        document.getElementById("fcard").innerHTML="Card :"+ localStorage.getItem("fcard");
        document.getElementById("fmonth").innerHTML="Card Month :"+ localStorage.getItem("fmonth");
        document.getElementById("fcvv").innerHTML="Card Cvv :"+ localStorage.getItem("fcvv");
        document.getElementById("fyear").innerHTM="Card Year :"+ localStorage.getItem("fyear");
        document.getElementById("fname").innerHTML="Name :"+ localStorage.getItem("fname");
        document.getElementById("femail").innerHTML="Email :"+ localStorage.getItem("femail");
        document.getElementById("faddress").innerHTML="Address :"+ localStorage.getItem("faddress");
        document.getElementById("fcity").innerHTML="City :"+ localStorage.getItem("fcity");
        document.getElementById("fzip").innerHTML="Zip  :"+ localStorage.getItem("fzip");
        document.getElementById("fstate").innerHTML="State :"+ localStorage.getItem("fstate");
        </script>
  </div>
          <div class="container">

            <script>
              window.onload=function(){what()}
                function what(){
                document.getElementById("product1").innerHTML=sessionStorage.getItem("product1")
                document.getElementById("product2").innerHTML=sessionStorage.getItem("product2")
                document.getElementById("product3").innerHTML=sessionStorage.getItem("product3")
                document.getElementById("product4").innerHTML=sessionStorage.getItem("product4")
                document.getElementById("product5").innerHTML=sessionStorage.getItem("product5")
                document.getElementById("product6").innerHTML=sessionStorage.getItem("product6")
                document.getElementById("product7").innerHTML=sessionStorage.getItem("product7")
                document.getElementById("product8").innerHTML=sessionStorage.getItem("product8")

                var price1 = document.getElementById("price1").innerHTML= sessionStorage.getItem("price1")
                var price2 = document.getElementById("price2").innerHTML= sessionStorage.getItem("price2")
                var price3 = document.getElementById("price3").innerHTML= sessionStorage.getItem("price3")
                var price4 = document.getElementById("price4").innerHTML= sessionStorage.getItem("price4")
                var price5 = document.getElementById("price5").innerHTML= sessionStorage.getItem("price5")
                var price6 = document.getElementById("price6").innerHTML= sessionStorage.getItem("price6")
                var price7 = document.getElementById("price7").innerHTML= sessionStorage.getItem("price7")
                var price8 = document.getElementById("price8").innerHTML= sessionStorage.getItem("price8")

                var quantity1 = document.getElementById("quantity1").innerHTML=sessionStorage.getItem("quantity1")
                var quantity2 =document.getElementById("quantity2").innerHTML=sessionStorage.getItem("quantity2")
                var quantity3 =document.getElementById("quantity3").innerHTML=sessionStorage.getItem("quantity3")
                var quantity4 =document.getElementById("quantity4").innerHTML=sessionStorage.getItem("quantity4")
                var quantity5 =document.getElementById("quantity5").innerHTML=sessionStorage.getItem("quantity5")
                var quantity6 =document.getElementById("quantity6").innerHTML=sessionStorage.getItem("quantity6")
                var quantity7 =document.getElementById("quantity7").innerHTML=sessionStorage.getItem("quantity7")
                var quantity8 =document.getElementById("quantity8").innerHTML=sessionStorage.getItem("quantity8")
                document.getElementById("ttotal").innerHTML=sessionStorage.getItem("ttotal")
                document.getElementById("tpoint").innerHTML=(sessionStorage.getItem("ttotal"))/10
                document.getElementById("ttpoint").innerHTML=(localStorage.getItem("point"))
              }
            </script>
              <h4>Cart <span style="margin-left: 15%;">qty</span><span style="margin-left: 10%;">Price</span><span  style="color:black;margin-left: 10%  ;"><i class="fa fa-shopping-cart"></i> <b></b></span></h4>

              <P><span  id ="product1" style="margin-right: 15%;"></span><span  id="quantity1" style="margin-right: 15%;"></span> <span  id ="price1" style="margin-right: 15%;"></span><a href="checkout.html"></a></P>
              <P><span  id ="product2" style="margin-right: 15%;"></span><span  id="quantity2" style="margin-right: 15%;"></span> <span  id ="price2" style="margin-right: 15%;"></span><a href="checkout.html"></a></P>
              <P><span  id ="product3" style="margin-right: 15%;"></span><span  id="quantity3" style="margin-right: 15%;"></span> <span  id ="price3" style="margin-right: 15%;"></span><a href="checkout.html"></a></P>
              <P><span  id ="product4" style="margin-right: 15%;"></span><span  id="quantity4" style="margin-right: 15%;"></span> <span  id ="price4" style="margin-right: 15%;"></span><a href="checkout.html"></a></P>
              <P><span  id ="product5" style="margin-right: 15%;"></span><span  id="quantity5" style="margin-right: 15%;"></span> <span  id ="price5" style="margin-right: 15%;"></span><a href="checkout.html"></a></P>
              <P><span  id ="product6" style="margin-right: 15%;"></span><span  id="quantity6" style="margin-right: 15%;"></span> <span  id ="price6" style="margin-right: 15%;"></span><a href="checkout.html"></a></P>
              <P><span  id ="product7" style="margin-right: 15%;"></span><span  id="quantity7" style="margin-right: 15%;"></span> <span  id ="price7" style="margin-right: 15%;"></span><a href="checkout.html"></a></P>
              <P><span  id ="product8" style="margin-right: 15%;"></span><span  id="quantity8" style="margin-right: 15%;"></span> <span  id ="price8" style="margin-right: 15%;"></span><a href="checkout.html"></a></P>

              <hr>
              <p>Total $  <span  style="color:black" id="ttotal" ><b></b></span></p>
              <p>Point Earned : <span  style="color:black" id="tpoint" ><b></b></span></p>
              <p>Account Point : <span  style="color:black" id="ttpoint" ><b></b></span></p>
              <span>Points To claim<input type="text" id="fclaim" placeholder="Points To claim from account" >

                <script>
                  function order()
                  {
                    if(localStorage.getItem("point") >= document.getElementById("fclaim").value)
                    {
                      alert("Order Successfully")
                      var a=localStorage.getItem("point")-document.getElementById("fclaim").value
                      alert("Price after deduction"+(sessionStorage.getItem("ttotal")-document.getElementById("fclaim").value)+"\nPoint left"+a    )                  
                      localStorage.removeItem("point")
                      localStorage.setItem("point",a)
                      sessionStorage.clear()
                      localStorage.removeItem("fcname");
                      localStorage.removeItem("fcard");
                      localStorage.removeItem("fmonth");
                      localStorage.removeItem("fcvv");
                      localStorage.removeItem("fyear");
                      localStorage.removeItem("fname");
                      localStorage.removeItem("femail");
                      localStorage.removeItem("faddress");
                      localStorage.removeItem("fcity");
                      localStorage.removeItem("fzip");
                      localStorage.removeItem("fstate");
                      updatepoint()
                      function updatepoint(){
                        alert( point)
                      let point =localStorage.getItem("point");
                      let username = localStorage.getItem("username")
                      let password = localStorage.getItem("password")
                      let id = localStorage.getItem("id")
                      var jsondata = { 
                        "username" : username,
                        "password":password,
                        "point":point,
                        
                      }
                      var settings = {
                        "async": true,
                        "crossDomain": true,
                        "url": `https://asst2-22ba.restdb.io/rest/profile/${id}`,
                        "method": "PUT",
                        "headers": {
                          "content-type": "application/json",
                          "x-apikey": "63e279d9478852088da67e71",
                          "cache-control": "no-cache"
                        },
                        "processData": false,
                        "data": JSON.stringify(jsondata)
                      }
                      $.ajax(settings).done(function (response) {
                        console.log(response);
                      });
                    }
                    }
                    else
                    {
                      alert("Order Failed. Insufficient balance")
                    }
                    
                  }
                </script>
                <input type="submit" value="Confirm Order"  onclick="order()">

                
              </div>
   
        

</body>


<footer>
  <br><br><br>

  <div class="footer-container">
    <div class="footer">
      <div class="footer-heading 1">
        <h2>Sitemap</h2>
        <a href="about.html">About Us</a>
        <a href="contact.html">Contact Us</a>
        <a href="faq.html">FAQs</a>
        <a href="index.html">Shop By Brand</a>
      </div>
      <div class="footer-heading 2">
        <h2>Helpful Links</h2>
        <a href="tnc.html">Terms & Conditions</a>
        <a href="checkout.html">Payment</a>
        <a href="tnc.html">Return & Exchange</a>
      </div>
      <div class="footer-heading 3">
        <h2>My Account</h2>
        <a href="checkout.html">My Shopping Cart</a>
        <a href="login.html">Login/Register</a>

      </div>
      <div class="footer-email">
        <h2>Join Our Mailing List</h2>
        <input type="email" placeholder="Email address" id="footer-email-address">
        <input type="submit" value="Sign Up" id="footer-email-button">     </footer></html>













